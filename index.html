<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Request Form</title>
    <link rel="stylesheet" href="./index.css" />
  </head>
  <body>
    <div class="banner">
      <h1>Product Requests/Suggestions</h1>
      <p>Please fill out this form with the required information</p>
    </div>
    <form id="productrecommendationform" method="POST" action="https://script.google.com/macros/s/AKfycbxTQHDKOhRPc0WJNw7PiXSWKTs_tMJhLqJG5RTz6b361ln6qRghCvN4WtISDScoI77h/exec">
      <fieldset>
        <label for="first-name">Enter Your First Name: 
          <input id="first-name" name="first-name" type="text" required />
        </label>
        <label for="last-name">Enter Your Last Name: 
          <input id="last-name" name="last-name" type="text" required />
        </label>
        <label for="email">Enter Your Email: 
          <input id="email" name="email" type="email" required />
        </label>
      </fieldset>
      <fieldset>
        <legend>Feedback Type: (required)</legend>
        <label for="questions">
          <input id="questions" type="radio" name="feedback-type" value="Questions" checked /> Questions
        </label>
        <label for="product-request">
          <input id="product-request" type="radio" name="feedback-type" value="Product Request" /> Product Request
        </label>
        <label for="store-suggestion">
          <input id="store-suggestion" type="radio" name="feedback-type" value="Store Suggestion" /> Store Suggestion
        </label>
      </fieldset>
      <fieldset>
        <label for="product-pictures">Upload Product Images: 
          <input id="product-pictures" type="file" name="product-pictures" />
        </label>
        <label for="feedback">Feedback:
          <textarea id="feedback" name="feedback" rows="5" cols="30" placeholder="Enter feedback here... "></textarea>
        </label>
      </fieldset>
      <label for="terms-and-conditions">
        <input class="inline" id="terms-and-conditions" type="checkbox" required name="terms-and-conditions" /> 
        I accept the <a href="https://www.freecodecamp.org/news/terms-of-service/">terms and conditions</a>
      </label>
      <input type="submit" value="Submit" />
    </form>
  </body>
</html>

<script>
  document.getElementById('contactForm').addEventListener('submit', async function (e) {
    e.preventDefault(); // Prevent default form submission
    
    const form = e.target;
    const formData = new FormData(form);
    const jsonData = {};
    
    formData.forEach((value, key) => {
      jsonData[key] = value;
    });

    const response = await fetch(form.action, {
      method: 'POST',
      body: JSON.stringify(jsonData),
      headers: { 'Content-Type': 'application/json' },
    });

    if (response.ok) {
      alert('Form submitted successfully!');
      form.reset();
    } else {
      alert('There was an issue submitting the form.');
    }
  });
</script>
